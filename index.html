<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Labubu Care Game - –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .notification-enter {
            animation: slideInRight 0.3s ease-out;
        }
        .notification-exit {
            animation: fadeOut 0.3s ease-out;
        }
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        .pet-bounce {
            animation: bounce 2s infinite;
        }
        .pet-sleep {
            animation: pulse 2s infinite;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-pink-100 via-purple-100 to-blue-100 min-h-screen">

<!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
<div id="notifications" class="fixed top-4 right-4 z-50 space-y-2"></div>

<!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–≥—Ä—ã -->
<div class="max-w-lg mx-auto bg-gradient-to-b from-pink-100 to-purple-100 rounded-xl p-4 shadow-lg min-h-screen">
    
    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –ø–æ–≥–æ–¥–æ–π –∏ –≤—Ä–µ–º–µ–Ω–µ–º -->
    <div class="text-center mb-4">
        <div class="flex justify-between items-center mb-2">
            <div class="text-sm" id="timeOfDay">‚òÄÔ∏è</div>
            <div class="text-center">
                <h1 class="text-xl font-bold text-purple-800">üê∞ <span id="petNameDisplay">Labubu</span> Care</h1>
                <div id="nameEditSection" class="hidden mt-2">
                    <input type="text" id="nameInput" class="text-sm px-2 py-1 border rounded" maxlength="15">
                    <div class="mt-1">
                        <button id="saveNameBtn" class="text-xs bg-blue-500 text-white px-2 py-1 rounded mr-1">‚úì</button>
                        <button id="cancelNameBtn" class="text-xs bg-gray-500 text-white px-2 py-1 rounded">‚úï</button>
                    </div>
                </div>
                <button id="editNameBtn" class="text-xs text-purple-600 hover:text-purple-800 mt-1">‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –∏–º—è</button>
            </div>
            <div class="text-sm" id="weather">‚òÄÔ∏è</div>
        </div>
        <div class="flex justify-between text-xs">
            <span id="levelDisplay">Lv.1</span>
            <span id="moneyDisplay">üí∞100</span>
            <span id="expDisplay">‚≠ê0/100</span>
            <span id="ageDisplay">üéÇ0–¥</span>
            <button id="soundToggle" class="text-xs">üîä</button>
        </div>
        <div id="collaboratorsInfo" class="text-xs text-purple-600 mt-1 hidden"></div>
    </div>

    <!-- –ü–µ—Ä—Å–æ–Ω–∞–∂ Labubu -->
    <div class="text-center mb-4 bg-white rounded-lg p-6 shadow">
        <div class="mb-4 relative inline-block">
            <img id="petImage" src="https://i.pinimg.com/474x/49/b9/bc/49b9bc9d7961d675e91a963b192c16a9.jpg" alt="Labubu" class="w-32 h-32 mx-auto object-contain">
            
            <!-- –û–¥–µ–∂–¥–∞ -->
            <div class="absolute inset-0" id="outfitContainer"></div>
            
            <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã -->
            <div id="sleepIndicator" class="absolute -top-2 -right-2 text-lg animate-pulse hidden">üí§</div>
            <div id="moodIndicator" class="absolute -top-1 -left-1 text-sm"></div>
            <div id="criticalIndicator" class="absolute inset-0 bg-red-500 bg-opacity-20 rounded-full animate-pulse hidden"></div>
        </div>
        
        <div class="text-2xl mb-2" id="moodEmoji">üòä</div>
        <div class="text-sm text-gray-600 font-medium" id="moodStatus">–°—á–∞—Å—Ç–ª–∏–≤</div>
        <div class="text-xs text-purple-600 mt-1" id="evolutionStage">–ú–∞–ª—ã—à</div>
        <div id="currentOutfit" class="text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded-full mt-2 inline-block hidden"></div>
        <div class="text-xs text-gray-500 mt-1">üéÇ –í–æ–∑—Ä–∞—Å—Ç: <span id="ageText">0</span> –¥–Ω–µ–π</div>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
    <div id="gameMessage" class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-3 py-2 rounded mb-3 text-center text-xs hidden"></div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ -->
    <div class="mb-4 bg-white rounded-lg p-3 shadow">
        <div id="statsContainer"></div>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∏ -->
    <div class="flex mb-3 bg-white rounded-lg p-1 shadow text-xs">
        <button class="tab-btn flex-1 py-2 px-1 rounded-md font-medium transition-colors bg-purple-500 text-white" data-tab="care">üîß –£—Ö–æ–¥</button>
        <button class="tab-btn flex-1 py-2 px-1 rounded-md font-medium transition-colors text-purple-500 hover:bg-purple-50" data-tab="games">üéÆ –ò–≥—Ä—ã</button>
        <button class="tab-btn flex-1 py-2 px-1 rounded-md font-medium transition-colors text-purple-500 hover:bg-purple-50" data-tab="shop">üõçÔ∏è –ú–∞–≥–∞–∑–∏–Ω</button>
        <button class="tab-btn flex-1 py-2 px-1 rounded-md font-medium transition-colors text-purple-500 hover:bg-purple-50" data-tab="chests">üì¶ –°—É–Ω–¥—É–∫–∏</button>
        <button class="tab-btn flex-1 py-2 px-1 rounded-md font-medium transition-colors text-purple-500 hover:bg-purple-50" data-tab="pets">üê∞ –ü–∏—Ç–æ–º—Ü—ã</button>
        <button class="tab-btn flex-1 py-2 px-1 rounded-md font-medium transition-colors text-purple-500 hover:bg-purple-50" data-tab="info">‚ÑπÔ∏è –ò–Ω—Ñ–æ</button>
    </div>

    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–æ–∫ -->
    <div id="tabContent"></div>
</div>

<!-- –ú–æ–¥–∞–ª –º–∏–Ω–∏-–∏–≥—Ä—ã -->
<div id="miniGameModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-lg p-6 max-w-sm w-full mx-4 max-h-96 overflow-y-auto">
        <h3 id="gameTitle" class="text-lg font-bold mb-4"></h3>
        <div id="gameContent"></div>
        <button id="cancelGameBtn" class="mt-4 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded w-full transition-colors">–û—Ç–º–µ–Ω–∞</button>
    </div>
</div>

<script>
class LabubuCareGame {
    constructor() {
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤–æ–π—Å—Ç–≤ –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
        this.stats = {
            hunger: 100, happiness: 100, cleanliness: 100,
            health: 100, energy: 100, sleep: 100
        };
        this.evolutionStages = {
            baby: { name: '–ú–∞–ª—ã—à', minAge: 0 },
            child: { name: '–†–µ–±–µ–Ω–æ–∫', minAge: 7 },
            teen: { name: '–ü–æ–¥—Ä–æ—Å—Ç–æ–∫', minAge: 30 },
            adult: { name: '–í–∑—Ä–æ—Å–ª—ã–π', minAge: 60 },
            elder: { name: '–ú—É–¥—Ä–µ—Ü', minAge: 100 }
        };
        this.skins = {
            default: { 
                name: '–ë–∞–∑–æ–≤—ã–π –õ–∞–±—É–±—É', 
                rarity: 'common', 
                chance: 50, 
                image: 'https://i.ebayimg.com/images/g/yVoAAOSwiqJnxCvP/s-l1600.jpg',
                color: '#DEB887'
            }
        };
        this.outfits = {
            default: { name: '–û–±—ã—á–Ω–∞—è –æ–¥–µ–∂–¥–∞', price: 0, emoji: 'üëï', description: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å—Ç–∏–ª—å' }
        };
        this.currentSkin = 'default';
        this.outfit = 'default';
        this.evolutionStage = 'baby';
        this.petName = 'Labubu';
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞—Å—Å–∏–≤–æ–≤ –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
        this.food = [
            { name: '–ü–µ—á–µ–Ω—å–µ', hunger: 20, price: 20, emoji: 'üç™', happiness: 5 },
            { name: '–§—Ä—É–∫—Ç—ã', hunger: 30, price: 35, emoji: 'üçé', health: 5 },
            { name: '–°—É—à–∏', hunger: 50, price: 65, emoji: 'üç£', happiness: 10 },
            { name: '–¢–æ—Ä—Ç', hunger: 40, happiness: 15, price: 75, emoji: 'üç∞' },
            { name: '–ú–æ—Ä–æ–∂–µ–Ω–æ–µ', hunger: 25, happiness: 20, price: 45, emoji: 'üç¶' },
            { name: '–ü–∏—Ü—Ü–∞', hunger: 60, price: 80, emoji: 'üçï', happiness: 10 },
            { name: '–í–∏—Ç–∞–º–∏–Ω—ã', health: 30, price: 95, emoji: 'üíä' },
            { name: '–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫', energy: 40, price: 55, emoji: '‚ö°' },
            { name: '–ë—É—Ä–≥–µ—Ä', hunger: 45, price: 50, emoji: 'üçî', happiness: 8 },
            { name: '–†—ã–±–∞', hunger: 35, health: 10, price: 45, emoji: 'üêü' },
            { name: '–°–∞–ª–∞—Ç', health: 15, cleanliness: 10, price: 40, emoji: 'ü•ó' },
            { name: '–ú–æ–ª–æ–∫–æ', hunger: 15, health: 8, price: 25, emoji: 'ü•õ' }
        ];
        
        this.miniGames = [
            { id: 'memory', name: '–ú–µ–º–æ—Ä–∏', emoji: 'üß†', description: '–ó–∞–ø–æ–º–Ω–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å', reward: { happiness: 25, experience: 20, money: 15 } },
            { id: 'reaction', name: '–†–µ–∞–∫—Ü–∏—è', emoji: '‚ö°', description: '–ù–∞–∂–º–∏ –∫–æ–≥–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è —Å–∏–≥–Ω–∞–ª', reward: { happiness: 20, experience: 15, money: 10 } },
            { id: 'math', name: '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞', emoji: 'üî¢', description: '–†–µ—à–∏ –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä', reward: { happiness: 30, experience: 25, money: 20 } },
            { id: 'puzzle', name: '–ü–∞–∑–ª', emoji: 'üß©', description: '–°–æ–±–µ—Ä–∏ —á–∏—Å–ª–∞ –ø–æ –ø–æ—Ä—è–¥–∫—É', reward: { happiness: 35, experience: 30, money: 25 } },
            { id: 'quiz', name: '–í–∏–∫—Ç–æ—Ä–∏–Ω–∞', emoji: 'ü§î', description: '–û—Ç–≤–µ—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å', reward: { happiness: 28, experience: 22, money: 18 } },
            { id: 'rhythm', name: '–†–∏—Ç–º', emoji: 'üéµ', description: '–ü–æ–≤—Ç–æ—Ä–∏ —Ä–∏—Ç–º', reward: { happiness: 40, experience: 25, money: 20 } },
            { id: 'treasure', name: '–ö–ª–∞–¥', emoji: 'üíé', description: '–ù–∞–π–¥–∏ —Å–æ–∫—Ä–æ–≤–∏—â–µ', reward: { happiness: 20, experience: 15, money: 35 } },
            { id: 'balance', name: '–ë–∞–ª–∞–Ω—Å', emoji: '‚öñÔ∏è', description: '–£–¥–µ—Ä–∂–∏ —Ä–∞–≤–Ω–æ–≤–µ—Å–∏–µ', reward: { happiness: 25, experience: 20, money: 15 } },
            { id: 'matching', name: '–ù–∞–π–¥–∏ –ø–∞—Ä—É', emoji: 'üÉè', description: '–ù–∞–π–¥–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏', reward: { happiness: 30, experience: 25, money: 22 } },
            { id: 'simon', name: '–°–∞–π–º–æ–Ω –≥–æ–≤–æ—Ä–∏—Ç', emoji: 'üéØ', description: '–ü–æ–≤—Ç–æ—Ä–∏ –∫–æ–º–∞–Ω–¥—ã –°–∞–π–º–æ–Ω–∞', reward: { happiness: 32, experience: 28, money: 25 } },
            { id: 'word', name: '–°–æ—Å—Ç–∞–≤—å —Å–ª–æ–≤–æ', emoji: 'üìù', description: '–°–æ—Å—Ç–∞–≤—å —Å–ª–æ–≤–æ –∏–∑ –±—É–∫–≤', reward: { happiness: 35, experience: 30, money: 28 } },
            { id: 'color', name: '–¶–≤–µ—Ç–Ω–∞—è –∏–≥—Ä–∞', emoji: 'üåà', description: '–£–≥–∞–¥–∞–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ü–≤–µ—Ç', reward: { happiness: 28, experience: 22, money: 18 } },
            { id: 'sequence', name: '–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å', emoji: 'üî§', description: '–ù–∞–π–¥–∏ —Å–ª–µ–¥—É—é—â–∏–π —ç–ª–µ–º–µ–Ω—Ç', reward: { happiness: 33, experience: 27, money: 24 } },
            { id: 'target', name: '–ü–æ–ø–∞–¥–∏ –≤ —Ü–µ–ª—å', emoji: 'üéØ', description: '–ü–æ–ø–∞–¥–∏ –≤ –¥–≤–∏–∂—É—â—É—é—Å—è –º–∏—à–µ–Ω—å', reward: { happiness: 30, experience: 25, money: 20 } },
            { id: 'catch', name: '–ü–æ–π–º–∞–π –ø—Ä–µ–¥–º–µ—Ç', emoji: 'ü™£', description: '–ü–æ–π–º–∞–π –ø–∞–¥–∞—é—â–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã', reward: { happiness: 35, experience: 28, money: 26 } },
            { id: 'maze', name: '–õ–∞–±–∏—Ä–∏–Ω—Ç', emoji: 'üåÄ', description: '–ù–∞–π–¥–∏ –≤—ã—Ö–æ–¥ –∏–∑ –ª–∞–±–∏—Ä–∏–Ω—Ç–∞', reward: { happiness: 40, experience: 35, money: 30 } },
            { id: 'code', name: '–í–∑–ª–æ–º–∞–π –∫–æ–¥', emoji: 'üîê', description: '–£–≥–∞–¥–∞–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥', reward: { happiness: 38, experience: 32, money: 28 } },
            { id: 'stack', name: '–°–æ–±–µ—Ä–∏ –±–∞—à–Ω—é', emoji: 'üèóÔ∏è', description: '–ü–æ—Å—Ç—Ä–æ–π –≤—ã—Å–æ–∫—É—é –±–∞—à–Ω—é', reward: { happiness: 36, experience: 30, money: 25 } },
            { id: 'speed', name: '–°–∫–æ—Ä–æ—Å—Ç—å', emoji: 'üí®', description: '–ù–∞–∂–º–∏ –∫–∞–∫ –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–µ–µ', reward: { happiness: 25, experience: 20, money: 15 } },
            { id: 'pattern', name: '–£–∑–æ—Ä', emoji: 'üé®', description: '–ü–æ–≤—Ç–æ—Ä–∏ —É–∑–æ—Ä', reward: { happiness: 34, experience: 28, money: 23 } }
        ];
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è —Å —Å–∏—Å—Ç–µ–º–æ–π –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–∫—É–ø–æ–∫
        this.inventory = {
            money: 100,
            purchasedItems: [], // –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫—É–ø–æ–∫ –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø–æ–∫—É–ø–æ–∫
            accessories: {
                hats: [],
                glasses: [],
                necklaces: [],
                toys: [],
                backgrounds: [],
                special: []
            },
            equippedAccessories: {
                hat: null,
                glasses: null,
                necklace: null,
                toy: null,
                background: null,
                special: null
            }
        };
        
        this.initializeData();
        
        // –ó–≤—É–∫–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
        this.audioContext = null;
        this.soundEnabled = this.loadData('sound_enabled', true, 'boolean');
        
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        this.activeTab = 'care';
        this.currentMiniGame = null;
        this.notifications = [];
        
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
        setTimeout(() => {
            this.updateDisplay();
        }, 50);
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        this.init();
        this.startGameLoop();
        this.startNotificationTimer();
        
        // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
        this.startAutoSave();
        
        // –ï—â–µ –æ–¥–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —Å–µ–∫—É–Ω–¥—É –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
        setTimeout(() => {
            this.updateDisplay();
            console.log('üîÑ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ');
        }, 1000);
    }
    
    async initializeData() {
        console.log('üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä—ã...');
        
        try {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage
            this.gameUserId = this.loadData('game_user_id', this.generateUserId(), 'string');
            this.telegramConnected = this.loadData('telegram_connected', false, 'boolean');
            this.telegramChatId = this.loadData('telegram_chat_id', '', 'string');
            
            console.log('üì± –õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –¥–∞–Ω–Ω—ã–µ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é');
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ localStorage
            this.stats = this.loadData('shared_labubu_stats', {
                hunger: 100, happiness: 100, cleanliness: 100,
                health: 100, energy: 100, sleep: 100
            });
            
            this.money = this.loadData('shared_labubu_money', 100, 'number');
            this.outfit = this.loadData('shared_labubu_outfit', 'default', 'string');
            this.level = this.loadData('shared_labubu_level', 1, 'number');
            this.experience = this.loadData('shared_labubu_experience', 0, 'number');
            this.age = this.loadData('shared_labubu_age', 0, 'number');
            this.evolutionStage = this.loadData('shared_labubu_evolution', 'baby', 'string');
            this.lastUpdate = this.loadData('shared_labubu_last_update', Date.now(), 'number');
            this.lastNotification = this.loadData('shared_labubu_last_notification', Date.now(), 'number');
            this.lastRestTime = this.loadData('shared_labubu_last_rest', 0, 'number');
            this.petName = this.loadData('shared_pet_name', 'Labubu', 'string');
            this.isSleeping = this.loadData('shared_labubu_sleeping', false, 'boolean');
            this.currentSkin = this.loadData('shared_current_skin', 'default', 'string');
            this.unlockedSkins = this.loadData('shared_unlocked_skins', ['default']);
            this.chestCount = this.loadData('shared_chest_count', 0, 'number');
            this.friendsInvited = this.loadData('shared_friends_invited', 0, 'number');
            this.lastChestLevel = this.loadData('shared_last_chest_level', 0, 'number');
            
            // –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            this.validateGameData();
            
            // –í —Ñ–æ–Ω–µ –ø—ã—Ç–∞–µ–º—Å—è –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞
            this.loadFromServerAsync();
            
            console.log('‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
            
        } catch (error) {
            console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö:', error);
            this.resetToDefaults();
        }
    }
    
    loadData(key, defaultValue, type = 'auto') {
        try {
            const saved = localStorage.getItem(key);
            
            if (saved === null || saved === undefined) {
                return defaultValue;
            }
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
            switch (type) {
                case 'string':
                    return saved;
                    
                case 'number':
                    const num = parseFloat(saved);
                    return isNaN(num) ? defaultValue : num;
                    
                case 'boolean':
                    return saved === 'true';
                    
                case 'auto':
                default:
                    try {
                        return JSON.parse(saved);
                    } catch (parseError) {
                        console.warn(`–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–ª—è –∫–ª—é—á–∞ ${key}:`, parseError);
                        return defaultValue;
                    }
            }
        } catch (error) {
            console.error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–ª—é—á–∞ ${key}:`, error);
            return defaultValue;
        }
    }
    
    validateGameData() {
        console.log('üîç –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä—ã...');
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫
        if (!this.stats || typeof this.stats !== 'object') {
            this.stats = {
                hunger: 100, happiness: 100, cleanliness: 100,
                health: 100, energy: 100, sleep: 100
            };
        }
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
        this.money = Math.max(0, this.money || 0);
        this.level = Math.max(1, this.level || 1);
        this.experience = Math.max(0, this.experience || 0);
        this.age = Math.max(0, this.age || 0);
        this.chestCount = Math.max(0, this.chestCount || 0);
        this.friendsInvited = Math.max(0, this.friendsInvited || 0);
        this.lastChestLevel = Math.max(0, this.lastChestLevel || 0);
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫ –ø–∏—Ç–æ–º—Ü–∞ (0-100)
        Object.keys(this.stats).forEach(stat => {
            this.stats[stat] = Math.max(0, Math.min(100, this.stats[stat] || 100));
        });
        
        console.log('‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
    }
    
    async loadFromServerAsync() {
        try {
            if (!this.gameUserId) {
                console.log('‚ö†Ô∏è gameUserId –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –∏–∑ –ë–î');
                return;
            }

            console.log('üîÑ –§–æ–Ω–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –≤ –ë–î...');

            const response = await fetch(`https://labubu-server.onrender.com/api/load-game/${this.gameUserId}`, {
                method: 'GET',
                signal: AbortSignal.timeout(5000)
            });

            if (response.ok) {
                const data = await response.json();
                
                if (data.success && data.gameData) {
                    const gameData = data.gameData;
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î –Ω–æ–≤–µ–µ localStorage
                    const localLastUpdate = this.lastUpdate;
                    
                    if (gameData.lastUpdate > localLastUpdate) {
                        console.log('üîÑ –ù–∞–π–¥–µ–Ω—ã –±–æ–ª–µ–µ —Å–≤–µ–∂–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î, –æ–±–Ω–æ–≤–ª—è–µ–º...');
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î
                        this.stats = gameData.stats || this.stats;
                        this.money = gameData.money || this.money;
                        this.level = gameData.level || this.level;
                        this.experience = gameData.experience || this.experience;
                        this.age = gameData.age || this.age;
                        this.outfit = gameData.outfit || this.outfit;
                        this.currentSkin = gameData.currentSkin || this.currentSkin;
                        this.unlockedSkins = gameData.unlockedSkins || this.unlockedSkins;
                        this.evolutionStage = gameData.evolutionStage || this.evolutionStage;
                        this.chestCount = gameData.chestCount || this.chestCount;
                        this.friendsInvited = gameData.friendsInvited || this.friendsInvited;
                        this.lastChestLevel = gameData.lastChestLevel || this.lastChestLevel;
                        this.isSleeping = gameData.isSleeping || this.isSleeping;
                        this.petName = gameData.petName || this.petName;
                        this.lastUpdate = gameData.lastUpdate || this.lastUpdate;
                        this.lastRestTime = gameData.lastRestTime || 0;
                        
                        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ localStorage –∫–∞–∫ –∫—ç—à
                        this.saveToLocalStorage();
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –Ω–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
                        this.updateDisplay();
                        
                        console.log('‚úÖ –î–∞–Ω–Ω—ã–µ –∏–∑ –ë–î —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã');
                        this.showMessage('üì± –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å —Å–µ—Ä–≤–µ—Ä–∞!');
                    } else {
                        console.log('üì± –õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã');
                    }
                }
            }

        } catch (error) {
            console.warn('‚ö†Ô∏è –§–æ–Ω–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞:', error.message);
        }
    }
    
    saveData() {
        try {
            console.log('üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä—ã...');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            this.lastUpdate = Date.now();
            
            // –ü–†–ò–û–†–ò–¢–ï–¢: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
            this.saveToDatabaseAsync().then(success => {
                if (success) {
                    console.log('‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ë–î (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)');
                } else {
                    console.log('‚ö†Ô∏è –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –≤ localStorage');
                }
            });
            
            // –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ localStorage –∫–∞–∫ –∫—ç—à
            this.saveToLocalStorage();
            
            console.log('‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–æ');
            
        } catch (error) {
            console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
            this.showMessage('‚ö†Ô∏è –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.');
        }
    }

    async saveToDatabaseAsync() {
        try {
            if (!this.gameUserId) {
                console.log('‚ö†Ô∏è gameUserId –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î');
                return false;
            }

            console.log('üåê –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö...');

            const gameData = {
                gameUserId: this.gameUserId,
                petName: this.petName,
                stats: this.stats,
                level: this.level,
                experience: this.experience,
                money: this.money,
                age: this.age,
                outfit: this.outfit,
                currentSkin: this.currentSkin,
                unlockedSkins: this.unlockedSkins,
                evolutionStage: this.evolutionStage,
                chestCount: this.chestCount,
                friendsInvited: this.friendsInvited,
                lastChestLevel: this.lastChestLevel,
                isSleeping: this.isSleeping,
                lastUpdate: this.lastUpdate,
                lastRestTime: this.lastRestTime
            };

            const response = await fetch('https://labubu-server.onrender.com/api/save-game', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(gameData),
                signal: AbortSignal.timeout(8000)
            });

            if (response.ok) {
                console.log('‚úÖ –î–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö');
                return true;
            } else {
                console.warn('‚ö†Ô∏è –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î:', response.status);
                return false;
            }

        } catch (error) {
            console.warn('‚ö†Ô∏è –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ:', error.message);
            return false;
        }
    }
    
    saveValue(key, value) {
        try {
            if (typeof value === 'object') {
                localStorage.setItem(key, JSON.stringify(value));
            } else {
                localStorage.setItem(key, value.toString());
            }
        } catch (error) {
            console.error(`–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è ${key}:`, error);
        }
    }
    
    saveToLocalStorage() {
        this.saveValue('shared_labubu_stats', this.stats);
        this.saveValue('shared_labubu_money', this.money);
        this.saveValue('shared_labubu_outfit', this.outfit);
        this.saveValue('shared_labubu_level', this.level);
        this.saveValue('shared_labubu_experience', this.experience);
        this.saveValue('shared_labubu_age', this.age);
        this.saveValue('shared_labubu_evolution', this.evolutionStage);
        this.saveValue('shared_labubu_last_update', Date.now());
        this.saveValue('shared_pet_name', this.petName);
        this.saveValue('shared_labubu_sleeping', this.isSleeping);
        this.saveValue('shared_current_skin', this.currentSkin);
        this.saveValue('shared_unlocked_skins', this.unlockedSkins);
        this.saveValue('shared_chest_count', this.chestCount);
        this.saveValue('shared_friends_invited', this.friendsInvited);
        this.saveValue('shared_last_chest_level', this.lastChestLevel);
        this.saveValue('shared_labubu_last_notification', this.lastNotification);
        this.saveValue('shared_labubu_last_rest', this.lastRestTime);
    }

    generateUserId() {
        return 'user_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now();
    }
    
    resetToDefaults() {
        console.log('üîÑ –°–±—Ä–æ—Å –∫ –∑–Ω–∞—á–µ–Ω–∏—è–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é...');
        
        this.stats = {
            hunger: 100, happiness: 100, cleanliness: 100,
            health: 100, energy: 100, sleep: 100
        };
        
        this.money = 100;
        this.outfit = 'default';
        this.level = 1;
        this.experience = 0;
        this.age = 0;
        this.evolutionStage = 'baby';
        this.lastUpdate = Date.now();
        this.lastNotification = Date.now();
        this.petName = 'Labubu';
        this.isSleeping = false;
        this.telegramConnected = false;
        this.telegramChatId = '';
        this.gameUserId = this.generateUserId();
        this.currentSkin = 'default';
        this.unlockedSkins = ['default'];
        this.chestCount = 0;
        this.friendsInvited = 0;
        this.lastChestLevel = 0;
        this.lastRestTime = 0;
        
        this.saveData();
    }
    
    startAutoSave() {
        // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
        setInterval(() => {
            this.saveData();
        }, 30000);
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('beforeunload', () => {
            this.saveData();
        });
        
        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Ñ–æ–∫—É—Å–∞
        window.addEventListener('blur', () => {
            this.saveData();
        });
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –ø—Ä–∏ —Ñ–æ–∫—É—Å–µ
        window.addEventListener('focus', () => {
            this.loadFromServerAsync();
        });
    }
    
    init() {
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
        this.updateTimeAndWeather();
        
        // –í–ê–ñ–ù–û: –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
        this.updateDisplay();
        
        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        this.initEventListeners();
        
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –∞–∫—Ç–∏–≤–Ω—É—é –≤–∫–ª–∞–¥–∫—É
        this.switchTab('care');
        
        // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –µ—â–µ —Ä–∞–∑ –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∫–ª–∞–¥–∫–∏
        setTimeout(() => {
            this.updateDisplay();
        }, 100);
        
        console.log('‚úÖ –ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!');
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –¥–ª—è Jojo (Telegram ID: 5224479471)
        this.isAdmin = () => {
            // –ê–¥–º–∏–Ω—ã: Jojo —Å Telegram ID 5224479471 –∏ Hatch ID
            const adminUsers = ['Jojo', 'jojo', '@jojez'];
            const adminTelegramId = '5224479471';
            const adminHatchId = 'user_2z7V9FOEAACKKYnUxFVldLTZhFE';
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á–µ—Ä–µ–∑ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
            if (typeof window !== 'undefined' && window.hatch && window.hatch.useUser) {
                try {
                    const user = window.hatch.useUser();
                    if (user && (adminUsers.includes(user.name) || user.id === adminHatchId)) {
                        return true;
                    }
                } catch (e) {
                    // –ï—Å–ª–∏ hatch.useUser –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
                }
            }
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Telegram ID (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω)
            if (typeof window !== 'undefined' && window.telegramUserId === adminTelegramId) {
                return true;
            }
            
            return false;
        };
        
        // –ê–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è @sdkksddas
        window.adminCommands = {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ–º–∞–Ω–¥
            checkAccess: () => {
                if (!this.isAdmin()) {
                    console.error('‚ùå –î–û–°–¢–£–ü –ó–ê–ü–†–ï–©–ï–ù: –ê–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è @sdkksddas');
                    return false;
                }
                return true;
            },
            
            // –î–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã Jojo (Telegram ID: 5224479471)
            givePlayerResources: (gameUserId = 'Jojo', money = 100000, chests = 1000) => {
                if (!adminCommands.checkAccess()) return false;
                
                try {
                    this.money = this.money + money;
                    this.chestCount = this.chestCount + chests;
                    this.showMessage(`üéÅ –ê–î–ú–ò–ù: –î–æ–±–∞–≤–ª–µ–Ω–æ ${money} –º–æ–Ω–µ—Ç –∏ ${chests} —Å—É–Ω–¥—É–∫–æ–≤ –¥–ª—è ${gameUserId}!`);
                    this.saveData();
                    this.updateDisplay();
                    console.log(`üëë –ê–î–ú–ò–ù: –í—ã–¥–∞–Ω—ã —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è ${gameUserId}: ${money} –º–æ–Ω–µ—Ç, ${chests} —Å—É–Ω–¥—É–∫–æ–≤`);
                    return true;
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤:', error);
                    return false;
                }
            },
            
            // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
            maxResources: () => {
                if (!adminCommands.checkAccess()) return false;
                
                try {
                    this.money = 999999;
                    this.chestCount = 9999;
                    this.showMessage('‚≠ê –ê–î–ú–ò–ù: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –≤—ã–¥–∞–Ω—ã!');
                    this.saveData();
                    this.updateDisplay();
                    console.log('üëë –ê–î–ú–ò–ù: –í—ã–¥–∞–Ω—ã –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã');
                    return true;
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –≤—ã–¥–∞—á–∏ —Ä–µ—Å—É—Ä—Å–æ–≤:', error);
                    return false;
                }
            },
            
            // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            fullRestore: () => {
                if (!adminCommands.checkAccess()) return false;
                
                try {
                    this.stats = {
                        hunger: 100,
                        happiness: 100,
                        cleanliness: 100,
                        health: 100,
                        energy: 100,
                        sleep: 100
                    };
                    this.showMessage('üîã –ê–î–ú–ò–ù: –í—Å–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã!');
                    this.saveData();
                    this.updateDisplay();
                    console.log('üëë –ê–î–ú–ò–ù: –í—Å–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã');
                    return true;
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫:', error);
                    return false;
                }
            },
            
            // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
            maxLevel: () => {
                if (!adminCommands.checkAccess()) return false;
                
                try {
                    this.level = 100;
                    this.experience = 9999;
                    this.showMessage('üöÄ –ê–î–ú–ò–ù: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å!');
                    this.saveData();
                    this.updateDisplay();
                    console.log('üëë –ê–î–ú–ò–ù: –í—ã–¥–∞–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å');
                    return true;
                } catch (error) {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –≤—ã–¥–∞—á–∏ —É—Ä–æ–≤–Ω—è:', error);
                    return false;
                }
            },
            
            // –°–ø—Ä–∞–≤–∫–∞
            help: () => {
                if (!adminCommands.checkAccess()) return false;
                
                console.log(`
üëë –ê–î–ú–ò–ù–°–ö–ò–ï –ö–û–ú–ê–ù–î–´ (—Ç–æ–ª—å–∫–æ –¥–ª—è Jojo - Telegram ID: 5224479471):

üí∞ adminCommands.givePlayerResources('Jojo', 100000, 1000) - –¥–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã
‚≠ê adminCommands.maxResources() - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (999,999 –º–æ–Ω–µ—Ç)
üîã adminCommands.fullRestore() - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
üöÄ adminCommands.maxLevel() - –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (100)
‚ùì adminCommands.help() - —ç—Ç–∞ —Å–ø—Ä–∞–≤–∫–∞

–ë–´–°–¢–†–´–ï –ö–û–ú–ê–ù–î–´ –î–õ–Ø JOJO:
> adminCommands.givePlayerResources('Jojo', 100000, 1000)
> adminCommands.maxResources()
> adminCommands.fullRestore()
> adminCommands.maxLevel()

üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨: –î–æ—Å—Ç—É–ø –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ —É Jojo (Telegram ID: 5224479471)
                `);
                return '–ö–æ–º–∞–Ω–¥—ã –≤—ã–≤–µ–¥–µ–Ω—ã –≤ –∫–æ–Ω—Å–æ–ª—å';
            }
        };
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–¥–º–∏–Ω—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã —Ç–æ–ª—å–∫–æ –¥–ª—è Jojo (Telegram ID: 5224479471)
        setTimeout(() => {
            if (this.isAdmin()) {
                console.log('%cüëë –ê–î–ú–ò–ù–°–ö–ò–ï –ö–û–ú–ê–ù–î–´ –î–û–°–¢–£–ü–ù–´ –î–õ–Ø JOJO!', 'color: #FF6B35; font-size: 16px; font-weight: bold;');
                console.log('%c–í–∞—à Telegram ID: 5224479471', 'color: #4A90E2; font-size: 14px;');
                console.log('%c–í–≤–µ–¥–∏—Ç–µ adminCommands.help() –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥', 'color: #4A90E2; font-size: 14px;');
                console.log('%cüéØ –ë—ã—Å—Ç—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤–∞—Å:', 'color: #22c55e; font-size: 14px;');
                console.log('%cadminCommands.givePlayerResources("Jojo", 100000, 1000)', 'color: #6366f1; font-size: 12px; background: #f1f5f9; padding: 4px;');
                console.log('%cüîí –î–æ—Å—Ç—É–ø –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ —É –≤–∞—Å (Telegram ID: 5224479471)', 'color: #ef4444; font-size: 12px;');
            } else {
                console.log('%cüéÆ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Labubu Care!', 'color: #8b5cf6; font-size: 16px; font-weight: bold;');
                console.log('%c–ó–∞–±–æ—Ç—å—Ç–µ—Å—å –æ —Å–≤–æ–µ–º –ø–∏—Ç–æ–º—Ü–µ –∏ –Ω–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å –∏–≥—Ä–æ–π!', 'color: #6b7280; font-size: 14px;');
            }
        }, 1000);
    }
    
    initEventListeners() {
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏
        document.addEventListener('click', (e) => {
            // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω–∏
            if (e.target.id === 'editNameBtn') {
                this.showNameEdit();
            } else if (e.target.id === 'saveNameBtn') {
                this.saveNameEdit();
            } else if (e.target.id === 'cancelNameBtn') {
                this.cancelNameEdit();
            }
            // –ó–≤—É–∫
            else if (e.target.id === 'soundToggle') {
                this.toggleSound();
            }
            // –í–∫–ª–∞–¥–∫–∏
            else if (e.target.classList.contains('tab-btn')) {
                this.switchTab(e.target.dataset.tab);
            }
            // –ú–∏–Ω–∏-–∏–≥—Ä—ã
            else if (e.target.id === 'cancelGameBtn') {
                this.closeMiniGame();
            }
        });
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ Enter –¥–ª—è –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏
        document.addEventListener('keypress', (e) => {
            if (e.target.id === 'nameInput' && e.key === 'Enter') {
                this.saveNameEdit();
            }
        });
    }
    
    updateTimeAndWeather() {
        const hour = new Date().getHours();
        const timeElement = document.getElementById('timeOfDay');
        const weatherElement = document.getElementById('weather');
        
        if (hour >= 6 && hour < 12) timeElement.textContent = 'üåÖ';
        else if (hour >= 12 && hour < 18) timeElement.textContent = '‚òÄÔ∏è';
        else if (hour >= 18 && hour < 22) timeElement.textContent = 'üåÜ';
        else timeElement.textContent = 'üåô';
        
        const weathers = ['‚òÄÔ∏è', '‚òÅÔ∏è', 'üåßÔ∏è', '‚ùÑÔ∏è'];
        weatherElement.textContent = weathers[Math.floor(Math.random() * weathers.length)];
    }
    
    updateDisplay() {
        console.log('üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è...', {
            petName: this.petName,
            level: this.level,
            money: this.money,
            experience: this.experience,
            age: this.age
        });
        
        // –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
        const petNameDisplay = document.getElementById('petNameDisplay');
        const levelDisplay = document.getElementById('levelDisplay');
        const moneyDisplay = document.getElementById('moneyDisplay');
        const expDisplay = document.getElementById('expDisplay');
        const ageDisplay = document.getElementById('ageDisplay');
        const ageText = document.getElementById('ageText');
        const soundToggle = document.getElementById('soundToggle');
        
        if (petNameDisplay) {
            petNameDisplay.textContent = this.petName;
            console.log('‚úÖ –ò–º—è –ø–∏—Ç–æ–º—Ü–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–æ:', this.petName);
        }
        if (levelDisplay) {
            levelDisplay.textContent = `Lv.${this.level}`;
            console.log('‚úÖ –£—Ä–æ–≤–µ–Ω—å –æ–±–Ω–æ–≤–ª–µ–Ω:', this.level);
        }
        if (moneyDisplay) {
            moneyDisplay.textContent = `üí∞${this.money}`;
            console.log('‚úÖ –î–µ–Ω—å–≥–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã:', this.money);
        }
        if (expDisplay) {
            expDisplay.textContent = `‚≠ê${this.experience}/100`;
            console.log('‚úÖ –û–ø—ã—Ç –æ–±–Ω–æ–≤–ª–µ–Ω:', this.experience);
        }
        if (ageDisplay) ageDisplay.textContent = `üéÇ${this.age}–¥`;
        if (ageText) ageText.textContent = this.age;
        
        // –ó–≤—É–∫
        if (soundToggle) soundToggle.textContent = this.soundEnabled ? 'üîä' : 'üîá';
        
        // –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ
        const mood = this.getMood();
        const moodEmoji = document.getElementById('moodEmoji');
        const moodStatus = document.getElementById('moodStatus');
        const evolutionStage = document.getElementById('evolutionStage');
        const petImage = document.getElementById('petImage');
        
        if (moodEmoji && mood) moodEmoji.textContent = mood.emoji;
        if (moodStatus && mood) moodStatus.textContent = mood.status;
        if (evolutionStage && this.evolutionStages && this.evolutionStages[this.evolutionStage]) {
            evolutionStage.textContent = this.evolutionStages[this.evolutionStage].name;
        }
        
        // –°–æ–Ω –∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
        const sleepIndicator = document.getElementById('sleepIndicator');
        const criticalIndicator = document.getElementById('criticalIndicator');
        const moodIndicator = document.getElementById('moodIndicator');
        
        if (sleepIndicator) sleepIndicator.classList.toggle('hidden', !this.isSleeping);
        
        // –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ stats –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
        if (this.stats && typeof this.stats === 'object') {
            const avgStats = Object.values(this.stats).reduce((a, b) => a + b, 0) / 6;
            const lowEnergy = this.stats.energy < 20;
            
            if (criticalIndicator) criticalIndicator.classList.toggle('hidden', avgStats > 10 && !lowEnergy);
        }
        
        if (moodIndicator && mood) {
            if (mood.emoji === 'ü•∞') moodIndicator.textContent = '‚ù§Ô∏è';
            else moodIndicator.textContent = '';
        }
        
        // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        this.updateStatsDisplay();
    }
    
    updateStatsDisplay() {
        const container = document.getElementById('statsContainer');
        if (!container) return;
        
        const stats = [
            { label: 'üçΩÔ∏è –ì–æ–ª–æ–¥', value: this.stats.hunger, color: 'bg-orange-500' },
            { label: 'üòä –°—á–∞—Å—Ç—å–µ', value: this.stats.happiness, color: 'bg-yellow-500' },
            { label: 'üõÅ –ß–∏—Å—Ç–æ—Ç–∞', value: this.stats.cleanliness, color: 'bg-blue-500' },
            { label: '‚ù§Ô∏è –ó–¥–æ—Ä–æ–≤—å–µ', value: this.stats.health, color: 'bg-red-500' },
            { label: '‚ö° –≠–Ω–µ—Ä–≥–∏—è', value: this.stats.energy, color: 'bg-green-500' },
            { label: 'üò¥ –°–æ–Ω', value: this.stats.sleep, color: 'bg-purple-500' }
        ];
        
        container.innerHTML = stats.map(stat => `
            <div class="mb-2">
                <div class="flex justify-between mb-1">
                    <span class="text-xs font-medium">${stat.label}</span>
                    <span class="text-xs">${Math.round(stat.value)}%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-1.5">
                    <div class="h-1.5 rounded-full transition-all duration-300 ${stat.color}" style="width: ${stat.value}%"></div>
                </div>
            </div>
        `).join('');
    }
    
    getMood() {
        if (this.isSleeping) return { emoji: 'üò¥', status: '–°–ø–∏—Ç' };
        
        // –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ stats
        if (!this.stats || typeof this.stats !== 'object') {
            return { emoji: 'üòê', status: '–ó–∞–≥—Ä—É–∑–∫–∞...' };
        }
        
        const avg = Object.values(this.stats).reduce((a, b) => a + b, 0) / 6;
        if (avg > 90) return { emoji: 'ü•∞', status: '–í–æ—Å—Ö–∏—Ç–∏—Ç–µ–ª—å–Ω–æ' };
        if (avg > 80) return { emoji: 'üòä', status: '–û—á–µ–Ω—å —Å—á–∞—Å—Ç–ª–∏–≤' };
        if (avg > 60) return { emoji: 'üôÇ', status: '–°—á–∞—Å—Ç–ª–∏–≤' };
        if (avg > 40) return { emoji: 'üòê', status: '–ù–æ—Ä–º–∞–ª—å–Ω–æ' };
        if (avg > 20) return { emoji: 'üòü', status: '–ì—Ä—É—Å—Ç–Ω–æ' };
        if (avg > 10) return { emoji: 'üò¢', status: '–û—á–µ–Ω—å –≥—Ä—É—Å—Ç–Ω–æ' };
        return { emoji: 'üíÄ', status: '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ' };
    }
    
    showMessage(msg) {
        const messageEl = document.getElementById('gameMessage');
        messageEl.textContent = msg;
        messageEl.classList.remove('hidden');
        setTimeout(() => messageEl.classList.add('hidden'), 3000);
    }
    
    showNameEdit() {
        document.getElementById('nameEditSection').classList.remove('hidden');
        document.getElementById('editNameBtn').classList.add('hidden');
        document.getElementById('nameInput').value = this.petName;
        document.getElementById('nameInput').focus();
    }
    
    saveNameEdit() {
        const newName = document.getElementById('nameInput').value.trim();
        if (newName && newName.length <= 15) {
            this.petName = newName;
            this.showMessage(`–¢–µ–ø–µ—Ä—å –∑–æ–≤—É—Ç ${this.petName}!`);
            this.saveData();
            this.updateDisplay();
        }
        this.cancelNameEdit();
    }
    
    cancelNameEdit() {
        document.getElementById('nameEditSection').classList.add('hidden');
        document.getElementById('editNameBtn').classList.remove('hidden');
    }
    
    toggleSound() {
        this.soundEnabled = !this.soundEnabled;
        this.updateDisplay();
        this.saveData();
    }
    
    switchTab(tab) {
        this.activeTab = tab;
        
        // –û–±–Ω–æ–≤–∏—Ç—å –∫–Ω–æ–ø–∫–∏
        document.querySelectorAll('.tab-btn').forEach(btn => {
            if (btn.dataset.tab === tab) {
                btn.className = 'tab-btn flex-1 py-2 px-1 rounded-md font-medium transition-colors bg-purple-500 text-white';
            } else {
                btn.className = 'tab-btn flex-1 py-2 px-1 rounded-md font-medium transition-colors text-purple-500 hover:bg-purple-50';
            }
        });
        
        // –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç
        const content = document.getElementById('tabContent');
        content.innerHTML = this.getTabContent(tab);
    }
    
    getTabContent(tab) {
        switch (tab) {
            case 'care':
                return this.getCareTabContent();
            case 'games':
                return this.getGamesTabContent();
            case 'shop':
                return this.getShopTabContent();
            case 'chests':
                return this.getChestsTabContent();
            case 'pets':
                return this.getPetsTabContent();
            case 'info':
                return this.getInfoTabContent();
            default:
                return '';
        }
    }
    
    getCareTabContent() {
        const foodGrid = this.food.map((item, index) => `
            <button onclick="game.feedPet(${index})" class="bg-orange-100 hover:bg-orange-200 p-2 rounded text-xs transition-colors" ${this.isSleeping ? 'disabled' : ''}>
                <div class="text-sm">${item.emoji}</div>
                <div class="font-medium text-xs">${item.name}</div>
                <div class="text-xs text-gray-600">${item.price}üí∞</div>
            </button>
        `).join('');
        
        return `
            <div class="space-y-3">
                <div class="bg-white rounded-lg p-3 shadow">
                    <h3 class="font-bold mb-2 text-purple-800 text-sm">üçΩÔ∏è –ö–æ—Ä–º–ª–µ–Ω–∏–µ</h3>
                    <div class="grid grid-cols-4 gap-1">${foodGrid}</div>
                </div>
                <div class="bg-white rounded-lg p-3 shadow">
                    <h3 class="font-bold mb-2 text-purple-800 text-sm">‚ö° –î–µ–π—Å—Ç–≤–∏—è</h3>
                    <div class="grid grid-cols-2 gap-1">
                        <button onclick="game.washPet()" class="bg-blue-100 hover:bg-blue-200 p-2 rounded text-xs transition-colors" ${this.isSleeping ? 'disabled' : ''}>
                            <div class="text-sm">üõÅ</div>
                            <div class="font-medium">–ú—ã—Ç—å</div>
                        </button>
                        <button onclick="game.healPet()" class="bg-red-100 hover:bg-red-200 p-2 rounded text-xs transition-colors">
                            <div class="text-sm">üíä</div>
                            <div class="font-medium">–õ–µ—á–∏—Ç—å</div>
                            <div class="text-xs">30üí∞</div>
                        </button>
                        <button onclick="game.restPet()" class="bg-green-100 hover:bg-green-200 p-2 rounded text-xs transition-colors" ${this.isSleeping || this.isRestOnCooldown() ? 'disabled' : ''}>
                            <div class="text-sm">‚ö°</div>
                            <div class="font-medium">–û—Ç–¥—ã—Ö</div>
                            <div class="text-xs">${this.isRestOnCooldown() ? this.getRestCooldownText() : '–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ +25'}</div>
                        </button>
                        <button onclick="game.toggleSleep()" class="bg-purple-100 hover:bg-purple-200 p-2 rounded text-xs transition-colors">
                            <div class="text-sm">${this.isSleeping ? '‚òÄÔ∏è' : 'üò¥'}</div>
                            <div class="font-medium">${this.isSleeping ? '–ë—É–¥–∏—Ç—å' : '–°–ø–∞—Ç—å'}</div>
                        </button>
                    </div>
                </div>
            </div>
        `;
    }
    
    getGamesTabContent() {
        const gamesGrid = this.miniGames.map((game, index) => `
            <button onclick="game.startMiniGame(${index})" class="p-2 rounded-lg text-xs transition-colors bg-yellow-100 hover:bg-yellow-200 flex flex-col items-center" ${this.isSleeping || this.stats.energy < 15 ? 'disabled' : ''}>
                <span class="text-lg mb-1">${game.emoji}</span>
                <div class="font-medium text-center">${game.name}</div>
                <div class="text-xs text-gray-600 text-center">${game.description}</div>
                <div class="text-xs text-red-600 mt-1">-15 —ç–Ω–µ—Ä–≥–∏–∏</div>
            </button>
        `).join('');
        
        return `
            <div class="bg-white rounded-lg p-3 shadow">
                <h3 class="font-bold mb-2 text-purple-800 text-sm">üéÆ –ú–∏–Ω–∏-–∏–≥—Ä—ã</h3>
                <div class="grid grid-cols-2 gap-2">${gamesGrid}</div>
            </div>
        `;
    }
    
    getShopTabContent() {
        return `
            <div class="bg-white rounded-lg p-3 shadow">
                <h3 class="font-bold mb-2 text-purple-800 text-sm">üõçÔ∏è –ú–∞–≥–∞–∑–∏–Ω (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)</h3>
                <p class="text-gray-600 text-xs">–°–∫–æ—Ä–æ –∑–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è –æ–¥–µ–∂–¥–∞ –¥–ª—è ${this.petName}!</p>
            </div>
        `;
    }
    
    getChestsTabContent() {
        return `
            <div class="bg-white rounded-lg p-3 shadow">
                <h3 class="font-bold mb-2 text-purple-800 text-sm">üì¶ –°—É–Ω–¥—É–∫–∏: ${this.chestCount}</h3>
                <p class="text-gray-600 text-xs">–ü–æ–ª—É—á–∞–π—Ç–µ —Å—É–Ω–¥—É–∫–∏ –∑–∞ –ø–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è!</p>
            </div>
        `;
    }
    
    getPetsTabContent() {
        return `
            <div class="bg-white rounded-lg p-3 shadow">
                <h3 class="font-bold mb-2 text-purple-800 text-sm">üê∞ –ü–∏—Ç–æ–º—Ü—ã</h3>
                <p class="text-gray-600 text-xs">–í–∞—à –ª—é–±–∏–º—ã–π ${this.petName} –∑–¥–µ—Å—å!</p>
            </div>
        `;
    }
    
    getInfoTabContent() {
        return `
            <div class="space-y-3">
                ${this.isAdmin() ? `
                    <div class="bg-red-50 p-3 rounded-lg border-2 border-red-200">
                        <h4 class="font-bold text-red-800 mb-3 text-center">üëë –ê–¥–º–∏–Ω—Å–∫–∞—è –ø–∞–Ω–µ–ª—å –¥–ª—è @sdkksddas</h4>
                        <div class="space-y-2">
                            <button onclick="adminCommands.givePlayerResources('@sdkksddas', 100000, 1000)" class="w-full bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded text-sm font-bold transition-colors">
                                üí∞ –î–∞—Ç—å @sdkksddas 100,000 –º–æ–Ω–µ—Ç –∏ 1,000 —Å—É–Ω–¥—É–∫–æ–≤
                            </button>
                            <button onclick="adminCommands.maxResources()" class="w-full bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-2 rounded text-sm font-bold transition-colors">
                                ‚≠ê –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã (999,999 –º–æ–Ω–µ—Ç)
                            </button>
                            <button onclick="adminCommands.fullRestore()" class="w-full bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded text-sm font-bold transition-colors">
                                üîã –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
                            </button>
                            <button onclick="adminCommands.maxLevel()" class="w-full bg-purple-500 hover:bg-purple-600 text-white px-3 py-2 rounded text-sm font-bold transition-colors">
                                üöÄ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (100)
                            </button>
                            <button onclick="adminCommands.help()" class="w-full bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded text-sm font-bold transition-colors">
                                ‚ùì –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã (–≤ –∫–æ–Ω—Å–æ–ª–∏ F12)
                            </button>
                        </div>
                        <p class="text-xs text-red-600 mt-3 text-center">‚ö†Ô∏è –¢–æ–ª—å–∫–æ –¥–ª—è @sdkksddas</p>
                        <p class="text-xs text-blue-600 mt-1 text-center">üí° –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12) –∏ –≤–≤–µ–¥–∏—Ç–µ: adminCommands.help()</p>
                    </div>
                ` : ''}
                
                <div class="bg-white rounded-lg p-3 shadow">
                    <h3 class="font-bold mb-3 text-purple-800 text-sm">‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–≥—Ä–µ</h3>
                    <div class="space-y-3 text-xs">
                        <div class="bg-blue-50 p-2 rounded">
                            <h4 class="font-bold text-blue-800 mb-1">üéÆ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä–æ–∫–∞</h4>
                            <div class="grid grid-cols-2 gap-2 text-xs">
                                <div>üí∞ –ú–æ–Ω–µ—Ç—ã: ${this.money}</div>
                                <div>üìà –£—Ä–æ–≤–µ–Ω—å: ${this.level}</div>
                                <div>‚≠ê –û–ø—ã—Ç: ${this.experience}</div>
                                <div>üéÇ –í–æ–∑—Ä–∞—Å—Ç: ${this.age} –¥–Ω–µ–π</div>
                                <div>üì¶ –°—É–Ω–¥—É–∫–∏: ${this.chestCount}</div>
                                <div>üë• –î—Ä—É–∑—å—è: ${this.friendsInvited}</div>
                            </div>
                        </div>
                        
                        <div class="bg-green-50 p-2 rounded">
                            <h4 class="font-bold text-green-800 mb-1">üéÆ –ö–∞–∫ –∏–≥—Ä–∞—Ç—å</h4>
                            <ul class="list-disc list-inside text-green-700">
                                <li>–ö–æ—Ä–º–∏—Ç–µ ${this.petName} –∫–æ–≥–¥–∞ –≥–æ–ª–æ–¥–µ–Ω</li>
                                <li>–ò–≥—Ä–∞–π—Ç–µ –≤ –º–∏–Ω–∏-–∏–≥—Ä—ã –¥–ª—è –æ–ø—ã—Ç–∞</li>
                                <li>–ü–æ–∫—É–ø–∞–π—Ç–µ –æ–¥–µ–∂–¥—É –∑–∞ –º–æ–Ω–µ—Ç—ã</li>
                                <li>–°–ª–µ–¥–∏—Ç–µ –∑–∞ –≤—Å–µ–º–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–º–∏</li>
                                <li>–í–∞—à –ø–∏—Ç–æ–º–µ—Ü —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç —Å –≤–æ–∑—Ä–∞—Å—Ç–æ–º!</li>
                            </ul>
                        </div>

                        <div class="text-center text-gray-500">
                            <p>üê∞ –°–æ–∑–¥–∞–Ω–æ —Å –ª—é–±–æ–≤—å—é –¥–ª—è ${this.petName}! üíï</p>
                            <p class="text-xs mt-1">–í–µ—Ä—Å–∏—è 4.0 - Fixed Admin Commands for @sdkksddas</p>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—É–ª–¥–∞—É–Ω–∞ –æ—Ç–¥—ã—Ö–∞
    isRestOnCooldown() {
        const now = Date.now();
        const timeSinceLastRest = now - this.lastRestTime;
        const restCooldown = 10 * 60 * 1000; // 10 –º–∏–Ω—É—Ç –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
        return timeSinceLastRest < restCooldown;
    }
    
    // –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—Å—Ç –∫—É–ª–¥–∞—É–Ω–∞ –æ—Ç–¥—ã—Ö–∞
    getRestCooldownText() {
        if (!this.isRestOnCooldown()) return '–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ +25';
        
        const now = Date.now();
        const timeSinceLastRest = now - this.lastRestTime;
        const restCooldown = 10 * 60 * 1000; // 10 –º–∏–Ω—É—Ç –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
        const remainingMinutes = Math.ceil((restCooldown - timeSinceLastRest) / (60 * 1000));
        
        return `–ß–µ—Ä–µ–∑ ${remainingMinutes}–º–∏–Ω`;
    }
    
    // –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
    feedPet(foodIndex) {
        if (this.isSleeping) {
            this.showMessage(`${this.petName} —Å–ø–∏—Ç! üò¥`);
            return;
        }
        
        const food = this.food[foodIndex];
        if (this.money >= food.price) {
            this.money -= food.price;
            this.stats.hunger = Math.min(100, this.stats.hunger + (food.hunger || 0));
            this.stats.happiness = Math.min(100, this.stats.happiness + (food.happiness || 0));
            this.stats.health = Math.min(100, this.stats.health + (food.health || 0));
            this.stats.energy = Math.min(100, this.stats.energy + (food.energy || 0));
            this.stats.cleanliness = Math.min(100, this.stats.cleanliness + (food.cleanliness || 0));
            
            // –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å —ç–Ω–µ—Ä–≥–∏–∏ –æ—Ç –µ–¥—ã
            if (!food.energy) {
                this.stats.energy = Math.min(100, this.stats.energy + 15);
            }
            
            // –ö–æ—Ä–º–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ç–∏—Ç —ç–Ω–µ—Ä–≥–∏—é –ø–∏—Ç–æ–º—Ü–∞ –Ω–∞ –ø–µ—Ä–µ–≤–∞—Ä–∏–≤–∞–Ω–∏–µ
            this.stats.energy = Math.max(0, this.stats.energy - 3);
            
            this.experience += 10;
            
            this.showMessage(`${this.petName} —Å—ä–µ–ª ${food.name}! ${food.emoji} (-3 —ç–Ω–µ—Ä–≥–∏–∏ –Ω–∞ –ø–µ—Ä–µ–≤–∞—Ä–∏–≤–∞–Ω–∏–µ)`);
            this.checkLevelUp();
            this.saveData();
            this.updateDisplay();
        } else {
            this.showMessage('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!');
        }
    }
    
    washPet() {
        if (this.isSleeping) {
            this.showMessage(`–ù–µ –±—É–¥–∏ —Å–ø—è—â–µ–≥–æ ${this.petName}! üò¥`);
            return;
        }
        
        if (this.stats.energy < 5) {
            this.showMessage(`${this.petName} —Å–ª–∏—à–∫–æ–º —É—Å—Ç–∞–ª –¥–ª—è –∫—É–ø–∞–Ω–∏—è! –ù—É–∂–µ–Ω –æ—Ç–¥—ã—Ö.`);
            return;
        }
        
        this.stats.cleanliness = 100;
        this.stats.happiness = Math.min(100, this.stats.happiness + 10);
        this.stats.energy = Math.max(0, this.stats.energy - 5);
        this.experience += 8;
        
        this.showMessage(`${this.petName} —á–∏—Å—Ç—ã–π –∏ —Å—á–∞—Å—Ç–ª–∏–≤—ã–π! üõÅ (-5 —ç–Ω–µ—Ä–≥–∏–∏)`);
        this.checkLevelUp();
        this.saveData();
        this.updateDisplay();
    }
    
    healPet() {
        if (this.money >= 30) {
            this.money -= 30;
            this.stats.health = 100;
            this.stats.happiness = Math.min(100, this.stats.happiness + 5);
            this.experience += 12;
            
            this.showMessage(`${this.petName} –∑–¥–æ—Ä–æ–≤! üíä`);
            this.checkLevelUp();
            this.saveData();
            this.updateDisplay();
        } else {
            this.showMessage('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç –¥–ª—è –ª–µ—á–µ–Ω–∏—è!');
        }
    }
    
    restPet() {
        if (this.isSleeping) {
            this.showMessage(`${this.petName} —É–∂–µ —Å–ø–∏—Ç! üò¥`);
            return;
        }
        
        if (this.stats.energy >= 90) {
            this.showMessage(`${this.petName} –ø–æ–ª–æ–Ω —ç–Ω–µ—Ä–≥–∏–∏! ‚ö°`);
            return;
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫—É–ª–¥–∞—É–Ω –æ—Ç–¥—ã—Ö–∞ (10 –º–∏–Ω—É—Ç = 600000 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥)
        const now = Date.now();
        const timeSinceLastRest = now - this.lastRestTime;
        const restCooldown = 10 * 60 * 1000; // 10 –º–∏–Ω—É—Ç –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
        
        if (timeSinceLastRest < restCooldown) {
            const remainingMinutes = Math.ceil((restCooldown - timeSinceLastRest) / (60 * 1000));
            this.showMessage(`‚è∞ –û—Ç–¥—ã—Ö –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ ${remainingMinutes} –º–∏–Ω.`);
            return;
        }
        
        // –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–¥—ã—Ö –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏—é
        this.stats.energy = Math.min(100, this.stats.energy + 25);
        this.stats.happiness = Math.min(100, this.stats.happiness + 5);
        this.experience += 5;
        this.lastRestTime = now; // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ—Ç–¥—ã—Ö–∞
        
        this.showMessage(`${this.petName} –æ—Ç–¥–æ—Ö–Ω—É–ª –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª —ç–Ω–µ—Ä–≥–∏—é! ‚ö° (+25 —ç–Ω–µ—Ä–≥–∏–∏)`);
        this.checkLevelUp();
        this.saveData();
        this.updateDisplay();
    }
    
    toggleSleep() {
        this.isSleeping = !this.isSleeping;
        
        if (this.isSleeping) {
            this.showMessage(`${this.petName} –ª–æ–∂–∏—Ç—Å—è —Å–ø–∞—Ç—å... üò¥`);
        } else {
            this.showMessage(`${this.petName} –ø—Ä–æ—Å–Ω—É–ª—Å—è! üòä`);
        }
        
        this.saveData();
        this.updateDisplay();
        this.switchTab('care');
    }
    
    startMiniGame(gameIndex) {
        if (this.isSleeping) {
            this.showMessage(`${this.petName} —Å–ø–∏—Ç! –†–∞–∑–±—É–¥–∏ –µ–≥–æ —Å–Ω–∞—á–∞–ª–∞! üò¥`);
            return;
        }
        if (this.stats.energy < 15) {
            this.showMessage('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–Ω–µ—Ä–≥–∏–∏! –ù—É–∂–Ω–æ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å.');
            return;
        }
        
        this.currentMiniGame = this.miniGames[gameIndex];
        this.showMiniGameModal();
    }
    
    showMiniGameModal() {
        document.getElementById('gameTitle').textContent = `${this.currentMiniGame.name} ${this.currentMiniGame.emoji}`;
        document.getElementById('gameContent').innerHTML = this.getMiniGameContent();
        document.getElementById('miniGameModal').classList.remove('hidden');
    }
    
    closeMiniGame() {
        document.getElementById('miniGameModal').classList.add('hidden');
        this.currentMiniGame = null;
    }
    
    getMiniGameContent() {
        // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä
        return `
            <div class="text-center">
                <p class="mb-4">${this.currentMiniGame.description}</p>
                <p class="text-sm text-gray-600 mb-4">–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å!</p>
                <button onclick="game.completeMiniGame(${Math.random() > 0.3})" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-bold transition-colors">
                    –ò–≥—Ä–∞—Ç—å!
                </button>
            </div>
        `;
    }
    
    completeMiniGame(success = null) {
        if (success === null) {
            success = Math.random() > 0.3; // 70% —à–∞–Ω—Å —É—Å–ø–µ—Ö–∞
        }
        
        if (success && this.currentMiniGame) {
            const reward = this.currentMiniGame.reward;
            this.stats.happiness = Math.min(100, this.stats.happiness + (reward.happiness || 0));
            this.stats.energy = Math.max(0, this.stats.energy - 15);
            this.experience += reward.experience || 0;
            this.money += reward.money || 0;
            
            this.showMessage(`–û—Ç–ª–∏—á–Ω–æ! +${reward.experience} –æ–ø—ã—Ç–∞, +${reward.money} –º–æ–Ω–µ—Ç!`);
        } else {
            this.stats.energy = Math.max(0, this.stats.energy - 10);
            this.showMessage('–ü–æ–ø—Ä–æ–±—É–π –µ—â–µ —Ä–∞–∑!');
        }
        
        this.checkLevelUp();
        this.saveData();
        this.updateDisplay();
        this.closeMiniGame();
    }
    
    checkLevelUp() {
        const newLevel = Math.floor(this.experience / 100) + 1;
        if (newLevel > this.level) {
            this.level = newLevel;
            this.money += 50;
            this.showMessage('üéâ –£—Ä–æ–≤–µ–Ω—å –ø–æ–≤—ã—à–µ–Ω! +50 –º–æ–Ω–µ—Ç!');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É–Ω–¥—É–∫–æ–≤ –∑–∞ —É—Ä–æ–≤–Ω–∏
            this.checkChestReward();
        }
    }
    
    checkChestReward() {
        const chestsEarned = Math.floor(this.level / 10);
        const chestsToAdd = chestsEarned - Math.floor(this.lastChestLevel / 10);
        
        if (chestsToAdd > 0) {
            this.chestCount += chestsToAdd;
            this.lastChestLevel = this.level;
            this.showMessage(`üéÅ –ü–æ–ª—É—á–µ–Ω${chestsToAdd > 1 ? '–æ' : ''} ${chestsToAdd} —Å—É–Ω–¥—É–∫${chestsToAdd > 1 ? '–∞' : ''}!`);
            this.saveData();
        }
    }
    
    startGameLoop() {
        // –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –≤–Ω–µ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        this.processOfflineTime();
        
        // –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª - –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è –±–æ–ª–µ–µ —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
        setInterval(() => {
            this.processGameTick();
        }, 30000); // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
        setInterval(() => {
            this.processOfflineTime();
        }, 60000);
    }
    
    processOfflineTime() {
        const now = Date.now();
        const timeDiff = Math.floor((now - this.lastUpdate) / 1000);
        
        console.log(`‚è∞ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏: –ø—Ä–æ—à–ª–æ ${Math.floor(timeDiff/60)} –º–∏–Ω—É—Ç —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è`);
        
        if (timeDiff >= 60) { // –ï—Å–ª–∏ –ø—Ä–æ—à–ª–∞ –º–∏–Ω—É—Ç–∞ –∏–ª–∏ –±–æ–ª—å—à–µ
            const minutesPassed = Math.floor(timeDiff / 60);
            
            // –°—Ç–∞—Ä–µ–Ω–∏–µ: –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞ (1440 –º–∏–Ω—É—Ç) = +1 –¥–µ–Ω—å
            if (minutesPassed >= 1440) {
                const daysToAdd = Math.floor(minutesPassed / 1440);
                this.age += daysToAdd;
                this.checkEvolution();
                console.log(`üìÖ –ü–∏—Ç–æ–º–µ—Ü –ø–æ—Å—Ç–∞—Ä–µ–ª –Ω–∞ ${daysToAdd} –¥–Ω–µ–π`);
            }
            
            // –ê–ì–†–ï–°–°–ò–í–ù–û–ï —Å–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫ - –∫–∞–∂–¥—ã–µ 2 –º–∏–Ω—É—Ç—ã!
            const statDecayIntervals = Math.floor(minutesPassed / 2);
            
            if (statDecayIntervals > 0) {
                console.log(`üìâ –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫ –∑–∞ ${statDecayIntervals} –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ (${minutesPassed} –º–∏–Ω—É—Ç)`);
                
                for (let i = 0; i < statDecayIntervals; i++) {
                    if (!this.isSleeping) {
                        // –ê–ì–†–ï–°–°–ò–í–ù–û–ï —Å–Ω–∏–∂–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 –º–∏–Ω—É—Ç—ã, –ù–û –≠–ù–ï–†–ì–ò–Ø –í–û–°–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–¢–°–Ø!
                        this.stats.hunger = Math.max(0, this.stats.hunger - 5);
                        this.stats.happiness = Math.max(0, this.stats.happiness - 4);
                        this.stats.cleanliness = Math.max(0, this.stats.cleanliness - 3);
                        this.stats.health = Math.max(0, this.stats.health - (this.stats.hunger < 20 ? 6 : 3));
                        this.stats.energy = Math.min(100, this.stats.energy + 2); // ‚ö° –≠–ù–ï–†–ì–ò–Ø –í–û–°–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–¢–°–Ø!
                        this.stats.sleep = Math.max(0, this.stats.sleep - 4);
                    } else {
                        // –ë–´–°–¢–†–û–ï –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è —Å–Ω–∞
                        this.stats.energy = Math.min(100, this.stats.energy + 10);
                        this.stats.sleep = Math.min(100, this.stats.sleep + 12);
                        
                        // –í–æ —Å–Ω–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ—á—Ç–∏ –Ω–µ –ø–∞–¥–∞—é—Ç
                        this.stats.hunger = Math.max(0, this.stats.hunger - 0.5);
                        this.stats.happiness = Math.max(0, this.stats.happiness - 0.2);
                        this.stats.cleanliness = Math.max(0, this.stats.cleanliness - 0.2);
                    }
                }
                
                this.lastUpdate = now;
                this.saveData();
                this.updateDisplay();
                
                console.log(`‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã: –ì–æ–ª–æ–¥ ${Math.round(this.stats.hunger)}%, –≠–Ω–µ—Ä–≥–∏—è ${Math.round(this.stats.energy)}% (–≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è!)`);
                this.showMessage(`‚è∞ –û–±–Ω–æ–≤–ª–µ–Ω–æ –∑–∞ ${minutesPassed}–º–∏–Ω: –ì–æ–ª–æ–¥ ${Math.round(this.stats.hunger)}%, –≠–Ω–µ—Ä–≥–∏—è ${Math.round(this.stats.energy)}% ‚ö°+`);
            }
        }
    }
    
    processGameTick() {
        // –û–±—ã—á–Ω—ã–π –∏–≥—Ä–æ–≤–æ–π —Ç–∏–∫ –∫–æ–≥–¥–∞ –∏–≥—Ä–∞ –∞–∫—Ç–∏–≤–Ω–∞
        const now = Date.now();
        const timeDiff = Math.floor((now - this.lastUpdate) / 1000);
        
        // –°–Ω–∏–∂–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥ –∫–æ–≥–¥–∞ –∏–≥—Ä–∞ –∞–∫—Ç–∏–≤–Ω–∞
        if (timeDiff >= 30) {
            if (!this.isSleeping) {
                // –õ–µ–≥–∫–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä—ã + –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –≠–ù–ï–†–ì–ò–ò
                this.stats.hunger = Math.max(0, this.stats.hunger - 0.5);
                this.stats.happiness = Math.max(0, this.stats.happiness - 0.3);
                this.stats.cleanliness = Math.max(0, this.stats.cleanliness - 0.2);
                this.stats.health = Math.max(0, this.stats.health - (this.stats.hunger < 20 ? 0.5 : 0.1));
                this.stats.energy = Math.min(100, this.stats.energy + 0.5); // ‚ö° –≠–ù–ï–†–ì–ò–Ø –í–û–°–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–¢–°–Ø!
                this.stats.sleep = Math.max(0, this.stats.sleep - 0.4);
            } else {
                // –ë–´–°–¢–†–û–ï –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–æ —Å–Ω–µ
                this.stats.energy = Math.min(100, this.stats.energy + 4);
                this.stats.sleep = Math.min(100, this.stats.sleep + 5);
            }
            
            this.lastUpdate = now;
            this.updateDisplay();
        }
    }
    
    checkEvolution() {
        const currentStage = Object.entries(this.evolutionStages)
            .reverse()
            .find(([_, stage]) => this.age >= stage.minAge)?.[0] || 'baby';
        
        if (currentStage !== this.evolutionStage) {
            this.evolutionStage = currentStage;
            this.showMessage(`üéâ –≠–≤–æ–ª—é—Ü–∏—è! –¢–µ–ø–µ—Ä—å ${this.evolutionStages[currentStage].name}!`);
        }
    }
    
    startNotificationTimer() {
        setInterval(() => {
            const now = Date.now();
            const timeSinceLastNotification = now - this.lastNotification;
            
            // 30 –º–∏–Ω—É—Ç = 1800000 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥
            if (timeSinceLastNotification >= 1800000) {
                this.showMessage(`üí≠ ${this.petName}: –¢—ã –Ω–µ –∑–∞–±—ã–ª –æ–±–æ –º–Ω–µ? –Ø —Å–∫—É—á–∞—é!`);
                this.lastNotification = now;
                localStorage.setItem('shared_labubu_last_notification', now.toString());
            }
        }, 60000); // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
    }
}

// –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
let game;
document.addEventListener('DOMContentLoaded', () => {
    console.log('üöÄ DOM –∑–∞–≥—Ä—É–∂–µ–Ω, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã...');
    game = new LabubuCareGame();
    
    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
    setTimeout(() => {
        if (game) {
            console.log('üîÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è...');
            game.updateDisplay();
        }
    }, 2000);
});
</script>

</body>
</html>
